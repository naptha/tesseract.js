(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Tesseract = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(e){return r[e]});if("0123456789"!==n.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);if(Object.getOwnPropertySymbols){n=Object.getOwnPropertySymbols(t);for(var s=0;s<n.length;s++)propIsEnumerable.call(t,n[s])&&(o[n[s]]=t[n[s]])}}return o};
},{}],2:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],3:[function(require,module,exports){
(function (process){
"use strict";function loadImage(e,t){if("string"==typeof e){if(/^\#/.test(e))return loadImage(document.querySelector(e),t);if(/(blob|data)\:/.test(e)){var a=new Image;return a.src=e,void(a.onload=function(e){return loadImage(a,t)})}var o=new XMLHttpRequest;return o.open("GET",e,!0),o.responseType="blob",o.onload=function(e){return loadImage(o.response,t)},o.onerror=function(a){/^https?:\/\//.test(e)&&!/^https:\/\/crossorigin.me/.test(e)&&(console.debug("Attempting to load image with CORS proxy"),loadImage("https://crossorigin.me/"+e,t))},void o.send(null)}if(e instanceof File){var r=new FileReader;return r.onload=function(e){return loadImage(r.result,t)},void r.readAsDataURL(e)}if(e instanceof Blob)return loadImage(URL.createObjectURL(e),t);if(e.getContext)return loadImage(e.getContext("2d"),t);if("IMG"==e.tagName||"VIDEO"==e.tagName){var n=document.createElement("canvas");n.width=e.naturalWidth||e.videoWidth,n.height=e.naturalHeight||e.videoHeight;var i=n.getContext("2d");return i.drawImage(e,0,0),loadImage(i,t)}if(e.getImageData){var s=e.getImageData(0,0,e.canvas.width,e.canvas.height);return loadImage(s,t)}return t(e)}var defaultOptions={workerPath:"https://cdn.rawgit.com/naptha/tesseract.js/0.2.0/dist/worker.js",corePath:"https://cdn.rawgit.com/naptha/tesseract.js-core/0.1.0/index.js",langPath:"https://cdn.rawgit.com/naptha/tessdata/gh-pages/3.02/"};"development"===process.env.NODE_ENV&&(console.debug("Using Development Configuration"),defaultOptions.workerPath=location.protocol+"//"+location.host+"/dist/worker.dev.js"),exports.defaultOptions=defaultOptions,exports.spawnWorker=function(e,t){if(window.Blob&&window.URL)var a=new Blob(['importScripts("'+t.workerPath+'");']),o=new Worker(window.URL.createObjectURL(a));else var o=new Worker(t.workerPath);return o.onmessage=function(t){var a=t.data;e._recv(a)},o},exports.terminateWorker=function(e){e.worker.terminate()},exports.sendPacket=function(e,t){loadImage(t.payload.image,function(a){t.payload.image=a,e.worker.postMessage(t)})};
}).call(this,require('_process'))

},{"_process":2}],4:[function(require,module,exports){
"use strict";module.exports=function(s){return s.paragraphs=[],s.lines=[],s.words=[],s.symbols=[],s.blocks.forEach(function(a){a.page=s,a.lines=[],a.words=[],a.symbols=[],a.paragraphs.forEach(function(o){o.block=a,o.page=s,o.words=[],o.symbols=[],o.lines.forEach(function(p){p.paragraph=o,p.block=a,p.page=s,p.symbols=[],p.words.forEach(function(r){r.line=p,r.paragraph=o,r.block=a,r.page=s,r.symbols.forEach(function(l){l.word=r,l.line=p,l.paragraph=o,l.block=a,l.page=s,l.line.symbols.push(l),l.paragraph.symbols.push(l),l.block.symbols.push(l),l.page.symbols.push(l)}),r.paragraph.words.push(r),r.block.words.push(r),r.page.words.push(r)}),p.block.lines.push(p),p.page.lines.push(p)}),o.page.paragraphs.push(o)})}),s};
},{}],5:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function create(e){e=e||{};var t=new TesseractWorker(objectAssign({},adapter.defaultOptions,e));return t.create=create,t}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),adapter=require("./node/index.js"),circularize=require("./common/circularize.js"),objectAssign=require("object-assign"),TesseractWorker=function(){function e(t){_classCallCheck(this,e),this.worker=null,this.workerOptions=t,this._currentJob=null,this._queue=[]}return _createClass(e,[{key:"recognize",value:function(e,t){var r=this;return this._delay(function(s){"string"==typeof t?t={lang:t}:(t=t||{},t.lang=t.lang||"eng"),s._send("recognize",{image:e,options:t,workerOptions:r.workerOptions})})}},{key:"detect",value:function(e,t){var r=this;return t=t||{},this._delay(function(s){s._send("detect",{image:e,options:t,workerOptions:r.workerOptions})})}},{key:"terminate",value:function(){this.worker&&adapter.terminateWorker(this),this.worker=null}},{key:"_delay",value:function(e){var t=this;this.worker||(this.worker=adapter.spawnWorker(this,this.workerOptions));var r=new TesseractJob(this);return this._queue.push(function(s){t._queue.shift(),t._currentJob=r,e(r)}),this._currentJob||this._dequeue(),r}},{key:"_dequeue",value:function(){this._currentJob=null,this._queue.length>0&&this._queue[0]()}},{key:"_recv",value:function(e){"resolve"===e.status&&"recognize"===e.action&&(e.data=circularize(e.data)),this._currentJob.id===e.jobId?this._currentJob._handle(e):console.warn("Job ID "+e.jobId+" not known.")}}]),e}(),jobCounter=0,TesseractJob=function(){function e(t){_classCallCheck(this,e),this.id="Job-"+ ++jobCounter+"-"+Math.random().toString(16).slice(3,8),this._instance=t,this._resolve=[],this._reject=[],this._progress=[]}return _createClass(e,[{key:"then",value:function(e,t){return this._resolve.push?this._resolve.push(e):e(this._resolve),t&&this.catch(t),this}},{key:"catch",value:function(e){return this._reject.push?this._reject.push(e):e(this._reject),this}},{key:"progress",value:function(e){return this._progress.push(e),this}},{key:"_send",value:function(e,t){adapter.sendPacket(this._instance,{jobId:this.id,action:e,payload:t})}},{key:"_handle",value:function(e){var t=e.data;"resolve"===e.status?(0===this._resolve.length&&console.debug(t),this._resolve.forEach(function(e){var r=e(t);r&&"function"==typeof r.then&&console.warn("TesseractJob instances do not chain like ES6 Promises. To convert it into a real promise, use Promise.resolve.")}),this._resolve=t,this._instance._dequeue()):"reject"===e.status?(0===this._reject.length&&console.error(t),this._reject.forEach(function(e){return e(t)}),this._reject=t,this._instance._dequeue()):"progress"===e.status?this._progress.forEach(function(e){return e(t)}):console.warn("Message type unknown",e.status)}}]),e}(),DefaultTesseract=create();module.exports=DefaultTesseract;
},{"./common/circularize.js":4,"./node/index.js":3,"object-assign":1}]},{},[5])(5)
});


//# sourceMappingURL=tesseract.js.map