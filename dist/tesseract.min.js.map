{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/index.js","src/common/circularize.js","src/browser/index.js","node_modules/object-assign/index.js","node_modules/process/browser.js"],"names":["create","workerOptions","worker","TesseractWorker","objectAssign","adapter","defaultOptions","require","circularize","_classCallCheck","this","_currentJob","_queue","image","options","_this","_delay","job","lang","_send","_this2","terminateWorker","fn","_this3","spawnWorker","TesseractJob","push","e","shift","_dequeue","length","packet","status","action","data","id","jobId","_handle","console","warn","jobCounter","instance","Math","random","toString","slice","_instance","_resolve","_reject","_progress","resolve","reject","catch","payload","sendPacket","debug","forEach","ret","then","error","DefaultTesseract","module","exports","page","paragraphs","lines","words","symbols","blocks","block","para","line","paragraph","word","sym","loadImage","cb","test","document","querySelector","im","Image","src","onload","xhr","XMLHttpRequest","open","responseType","response","onerror","send","File","fr","FileReader","result","readAsDataURL","Blob","URL","createObjectURL","getContext","tagName","c","createElement","width","naturalWidth","videoWidth","height","naturalHeight","videoHeight","ctx","drawImage","getImageData","canvas","workerPath","corePath","langPath","process","env","NODE_ENV","location","protocol","host","window","blob","Worker","onmessage","_recv","terminate","img","postMessage","toObject","val","undefined","TypeError","Object","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","order2","map","n","join","test3","split","letter","keys","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","target","source","from","to","s","arguments","key","call","getOwnPropertySymbols","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","Array","apply","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","const adapter = require('./node/index.js')\nconst circularize = require('./common/circularize.js')\nconst objectAssign = require('object-assign');\n\nfunction create(workerOptions){\n\tworkerOptions = workerOptions || {};\n\tvar worker = new TesseractWorker(objectAssign({}, adapter.defaultOptions, workerOptions))\n\tworker.create = create;\n\treturn worker;\n}\n\nclass TesseractWorker {\n\tconstructor(workerOptions){\n\t\tthis.worker = null;\n\t\tthis.workerOptions = workerOptions;\n\t\tthis._currentJob = null;\n\t\tthis._queue = []\n\t}\n\n\trecognize(image, options){\n\t\treturn this._delay(job => {\n\t\t\tif(typeof options === 'string'){\n\t\t\t\toptions = { lang: options };\n\t\t\t}else{\n\t\t\t\toptions = options || {}\n\t\t\t\toptions.lang = options.lang || 'eng';\t\n\t\t\t}\n\t\t\t\n\t\t\tjob._send('recognize', { image: image, options: options, workerOptions: this.workerOptions })\n\t\t})\n\t}\n\tdetect(image, options){\n\t\toptions = options || {}\n\t\treturn this._delay(job => {\n\t\t\tjob._send('detect', { image: image, options: options, workerOptions: this.workerOptions })\n\t\t})\n\t}\n\n\tterminate(){ \n\t\tif(this.worker) adapter.terminateWorker(this);\n\t\tthis.worker = null;\n\t}\n\n\t_delay(fn){\n\t\tif(!this.worker) this.worker = adapter.spawnWorker(this, this.workerOptions);\n\n\t\tvar job = new TesseractJob(this);\n\t\tthis._queue.push(e => {\n\t\t\tthis._queue.shift()\n\t\t\tthis._currentJob = job;\n\t\t\tfn(job)\n\t\t})\n\t\tif(!this._currentJob) this._dequeue();\n\t\treturn job\n\t}\n\n\t_dequeue(){\n\t\tthis._currentJob = null;\n\t\tif(this._queue.length > 0){\n\t\t\tthis._queue[0]()\n\t\t}\n\t}\n\n\t_recv(packet){\n\n        if(packet.status === 'resolve' && packet.action === 'recognize'){\n            packet.data = circularize(packet.data);\n        }\n\n\t\tif(this._currentJob.id === packet.jobId){\n\t\t\tthis._currentJob._handle(packet)\n\t\t}else{\n\t\t\tconsole.warn('Job ID ' + packet.jobId + ' not known.')\n\t\t}\n\t}\n}\n\nvar jobCounter = 0;\n\nclass TesseractJob {\n\tconstructor(instance){\n\t\tthis.id = 'Job-' + (++jobCounter) + '-' + Math.random().toString(16).slice(3, 8)\n\n\t\tthis._instance = instance;\n\t\tthis._resolve = []\n\t\tthis._reject = []\n\t\tthis._progress = []\n\t}\n\n\tthen(resolve, reject){\n\t\tif(this._resolve.push){\n\t\t\tthis._resolve.push(resolve)\t\n\t\t}else{\n\t\t\tresolve(this._resolve)\n\t\t}\n\n\t\tif(reject) this.catch(reject);\n\t\treturn this;\n\t}\n\tcatch(reject){\n\t\tif(this._reject.push){\n\t\t\tthis._reject.push(reject)\t\n\t\t}else{\n\t\t\treject(this._reject)\n\t\t}\n\t\treturn this;\n\t}\n\tprogress(fn){\n\t\tthis._progress.push(fn)\n\t\treturn this;\n\t}\n\t_send(action, payload){\n\t\tadapter.sendPacket(this._instance, {\n\t\t\tjobId: this.id,\n\t\t\taction: action,\n\t\t\tpayload: payload\n\t\t})\n\t}\n\n\t_handle(packet){\n\t\tvar data = packet.data;\n\t\tif(packet.status === 'resolve'){\n\t\t\tif(this._resolve.length === 0) console.debug(data);\n\t\t\tthis._resolve.forEach(fn => {\n\t\t\t\tvar ret = fn(data);\n\t\t\t\tif(ret && typeof ret.then == 'function'){\n\t\t\t\t\tconsole.warn('TesseractJob instances do not chain like ES6 Promises. To convert it into a real promise, use Promise.resolve.')\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis._resolve = data;\n\t\t\tthis._instance._dequeue()\n\t\t}else if(packet.status === 'reject'){\n\t\t\tif(this._reject.length === 0) console.error(data);\n\t\t\tthis._reject.forEach(fn => fn(data))\n\t\t\tthis._reject = data;\n\t\t\tthis._instance._dequeue()\n\t\t}else if(packet.status === 'progress'){\n\t\t\tthis._progress.forEach(fn => fn(data))\n\t\t}else{\n\t\t\tconsole.warn('Message type unknown', packet.status)\n\t\t}\n\t}\n}\n\n\nvar DefaultTesseract = create()\n\nmodule.exports = DefaultTesseract\n\n","// The result of dump.js is a big JSON tree\n// which can be easily serialized (for instance\n// to be sent from a webworker to the main app\n// or through Node's IPC), but we want\n// a (circular) DOM-like interface for walking\n// through the data. \n\nmodule.exports = function circularize(page){\n    page.paragraphs = []\n    page.lines = []\n    page.words = []\n    page.symbols = []\n\n    page.blocks.forEach(function(block){\n        block.page = page;\n\n        block.lines = []\n        block.words = []\n        block.symbols = []\n\n        block.paragraphs.forEach(function(para){\n            para.block = block;\n            para.page = page;\n\n            para.words = []\n            para.symbols = []\n            \n            para.lines.forEach(function(line){\n                line.paragraph = para;\n                line.block = block;\n                line.page = page;\n\n                line.symbols = []\n\n                line.words.forEach(function(word){\n                    word.line = line;\n                    word.paragraph = para;\n                    word.block = block;\n                    word.page = page;\n                    word.symbols.forEach(function(sym){\n                        sym.word = word;\n                        sym.line = line;\n                        sym.paragraph = para;\n                        sym.block = block;\n                        sym.page = page;\n                        \n                        sym.line.symbols.push(sym)\n                        sym.paragraph.symbols.push(sym)\n                        sym.block.symbols.push(sym)\n                        sym.page.symbols.push(sym)\n                    })\n                    word.paragraph.words.push(word)\n                    word.block.words.push(word)\n                    word.page.words.push(word)\n                })\n                line.block.lines.push(line)\n                line.page.lines.push(line)\n            })\n            para.page.paragraphs.push(para)\n        })\n    })\n    return page\n}","var defaultOptions = {\n    workerPath: 'https://cdn.rawgit.com/naptha/tesseract.js/0.2.0/dist/worker.js',\n    corePath: 'https://cdn.rawgit.com/naptha/tesseract.js-core/0.1.0/index.js',    \n    langPath: 'https://cdn.rawgit.com/naptha/tessdata/gh-pages/3.02/',\n}\n\nif (process.env.NODE_ENV === \"development\") {\n    console.debug('Using Development Configuration')\n    defaultOptions.workerPath = location.protocol + '//' + location.host + '/dist/worker.dev.js'\n}\n\nexports.defaultOptions = defaultOptions;\n\n\nexports.spawnWorker = function spawnWorker(instance, workerOptions){\n    if(window.Blob && window.URL){\n        var blob = new Blob(['importScripts(\"' + workerOptions.workerPath + '\");'])\n        var worker = new Worker(window.URL.createObjectURL(blob));\n    }else{\n        var worker = new Worker(workerOptions.workerPath)\n    }\n\n    worker.onmessage = function(e){\n        var packet = e.data;\n        instance._recv(packet)\n    }\n    return worker\n}\n\nexports.terminateWorker = function(instance){\n    instance.worker.terminate()\n}\n\nexports.sendPacket = function sendPacket(instance, packet){\n    loadImage(packet.payload.image, function(img){\n        packet.payload.image = img\n        instance.worker.postMessage(packet) \n    })\n}\n\n\nfunction loadImage(image, cb){\n    if(typeof image === 'string'){\n        if(/^\\#/.test(image)){\n            // element css selector\n            return loadImage(document.querySelector(image), cb)\n        }else if(/(blob|data)\\:/.test(image)){\n            // data url\n            var im = new Image\n            im.src = image;\n            im.onload = e => loadImage(im, cb);\n            return\n        }else{\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', image, true)\n            xhr.responseType = \"blob\";\n            xhr.onload = e => loadImage(xhr.response, cb);\n            xhr.onerror = function(e){\n                if(/^https?:\\/\\//.test(image) && !/^https:\\/\\/crossorigin.me/.test(image)){\n                    console.debug('Attempting to load image with CORS proxy')\n                    loadImage('https://crossorigin.me/' + image, cb)\n                }\n            }\n            xhr.send(null)\n            return\n        }\n    }else if(image instanceof File){\n        // files\n        var fr = new FileReader()\n        fr.onload = e => loadImage(fr.result, cb);\n        fr.readAsDataURL(image)\n        return\n    }else if(image instanceof Blob){\n        return loadImage(URL.createObjectURL(image), cb)\n    }else if(image.getContext){\n        // canvas element\n        return loadImage(image.getContext('2d'), cb)\n    }else if(image.tagName == \"IMG\" || image.tagName == \"VIDEO\"){\n        // image element or video element\n        var c = document.createElement('canvas');\n        c.width  = image.naturalWidth  || image.videoWidth;\n        c.height = image.naturalHeight || image.videoHeight;\n        var ctx = c.getContext('2d');\n        ctx.drawImage(image, 0, 0);\n        return loadImage(ctx, cb)\n    }else if(image.getImageData){\n        // canvas context\n        var data = image.getImageData(0, 0, image.canvas.width, image.canvas.height);\n        return loadImage(data, cb)\n    }else{\n        return cb(image)\n    }\n    throw new Error('Missing return in loadImage cascade')\n\n}\n","'use strict';\n/* eslint-disable no-unused-vars */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"]}